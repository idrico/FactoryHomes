<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"

        >
<h:body>
    <ui:composition template="/WEB-INF/templates/default.xhtml">
        <ui:define name="content">

            <h:form id="reg">
                <h2>Customer Registration</h2>
                <h:panelGrid columns="3" columnClasses="titleCell">
                    <h:outputLabel for="name" value="Name:"/>
                    <h:inputText id="name" value="#{newCustomer.name}" />
                    <h:message for="name" errorClass="invalid"/>

                    <h:outputLabel for="email" value="Email:"/>
                    <h:inputText id="email" value="#{newCustomer.email}"/>
                    <h:message for="email" errorClass="invalid"/>

                    <h:outputLabel for="phoneNumber" value="Phone #:"/>
                    <h:inputText id="phoneNumber" value="#{newCustomer.phoneNumber}"/>
                    <h:message for="phoneNumber" errorClass="invalid"/>

                    <h:outputLabel for="zipCode" value="Zip Code #:"/>
                    <h:selectOneMenu id="zipCode" value="#{newCustomer.zipCode}" converter="#{zipCodeBean}">
                        <f:selectItems value="#{zipCodes}" var="s"
                                       itemValue="#{s}" itemLabel="#{s.city}"/>
                    </h:selectOneMenu>
                    <h:message for="zipCode" errorClass="invalid"/>




                </h:panelGrid>

                <p>
                    <h:panelGrid columns="2">
                        <h:commandButton id="register" action="#{customerController.register}" value="Register" styleClass="register"/>
                        <h:messages styleClass="messages" errorClass="invalid" infoClass="valid" warnClass="warning"
                                    globalOnly="true"/>
                    </h:panelGrid>
                </p>
            </h:form>
            <h2>Customers</h2>
            <h:panelGroup rendered="#{empty customers}">
                <em>No registered customers.</em>
            </h:panelGroup>
            <h:dataTable var="_customer" value="#{customers}" rendered="#{not empty customers}" styleClass="simpletablestyle">
                <h:column>
                    <f:facet name="header">Id</f:facet>
                    #{_customer.id}
                </h:column>
                <h:column>
                    <f:facet name="header">Name</f:facet>
                    #{_customer.name}
                </h:column>
                <h:column>
                    <f:facet name="header">Email</f:facet>
                    #{_customer.email}
                </h:column>
                <h:column>
                    <f:facet name="header">Phone #</f:facet>
                    #{_customer.phoneNumber}
                </h:column>
                <h:column>
                    <f:facet name="header">Zip Code</f:facet>
                    #{_customer.zipCode.id}
                </h:column>
                <h:column>
                    <f:facet name="header">REST URL</f:facet>
                    <a href="#{request.contextPath}/rest/customers/#{_customer.id}">/rest/customers/#{_customer.id}</a>
                </h:column>
                <f:facet name="footer">
                    REST URL for all customers: <a href="#{request.contextPath}/rest/customers">/rest/customers</a>
                </f:facet>
            </h:dataTable>
        </ui:define>

        <ui:define name="footer">
            <h2>This is page1 Footer</h2>
        </ui:define>

    </ui:composition>

</h:body>
</html>
